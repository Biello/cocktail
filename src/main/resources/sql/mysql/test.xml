<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="testSQL">
	
	<!-- 根据id查name -->
	<select id="queryNameById" resultType="java.lang.String">
		SELECT name
		FROM test
		WHERE id = #{_parameter}
	</select>
	
	<!-- 查询数据 -->
	<select id="queryDataList" resultType="java.util.HashMap">
		SELECT *
		FROM ${tableName}
		WHERE 1 = 1
	</select>
	
	<!-- 获取参数表 -->
	<select id="queryTableList" resultType="java.util.HashMap">
		SELECT TABLE_ID, TABLE_DESC
		FROM TD_S_TABLE_PROPERTY
		WHERE 1 = 1
	</select>
	
	<!-- 查询要修改的数据 -->
	<select id="queryDataForModify" resultType="java.util.HashMap">
		SELECT *
		 FROM ${tableName}
		WHERE 1 = 1 
		AND ${pkName} = #{pkValue}
	</select>
	
	<!-- 查询所有列 -->
	<select id="queryColumns" resultType="java.util.HashMap">
		SELECT COLUMN_NAME, COLUMN_DESC
		  FROM TD_S_COMMPARAM
		 WHERE TABLE_NAME = #{tableName}
		 ORDER BY PARAM_ID
	</select>
	
	<!-- 查询可修改列 -->
	<select id="queryColumnsForModify" resultType="java.util.HashMap">
		SELECT COLUMN_NAME, COLUMN_DESC, NULLABLE, INPUT_TYPE, SEMANTIC_VALUE
		  FROM TD_S_COMMPARAM
		 WHERE TABLE_NAME = #{tableName} AND DISPLAY = '0'
		 ORDER BY PARAM_ID
	</select>
	
	<!-- 查询可作为查询条件的列 -->
	<select id="queryConditionColumns" resultType="java.util.HashMap">
		SELECT COLUMN_NAME, COLUMN_DESC, INPUT_TYPE, SEMANTIC_VALUE
		  FROM TD_S_COMMPARAM
		 WHERE TABLE_NAME = #{tableName} AND QUERY_CONDITION = '1'
		 ORDER BY PARAM_ID
	</select>
	
	<select id="queryCreateStaffId" resultType="java.lang.String">
		SELECT COLUMN_NAME 
		  FROM TD_S_COMMPARAM 
		WHERE TABLE_NAME = #{tableName} AND SEMANTIC_VALUE = 'createStaffId'
	</select>
	
	<select id="queryCreateTime" resultType="java.lang.String">
		SELECT COLUMN_NAME 
		  FROM TD_S_COMMPARAM 
		WHERE TABLE_NAME = #{tableName} AND SEMANTIC_VALUE = 'createTime'
	</select>
	
	<select id="queryUpdateStaffId" resultType="java.lang.String">
		SELECT COLUMN_NAME 
		  FROM TD_S_COMMPARAM 
		WHERE TABLE_NAME = #{tableName} AND SEMANTIC_VALUE = 'updateStaffId'
	</select>
	
	<select id="queryUpdateTime" resultType="java.lang.String">
		SELECT COLUMN_NAME 
		  FROM TD_S_COMMPARAM 
		WHERE TABLE_NAME = #{tableName} AND SEMANTIC_VALUE = 'updateTime'
	</select>
	
	<select id="queryKeysToReplace" resultType="java.lang.String">
		SELECT DISTINCT COLUMN_NAME
	  FROM TD_S_PARAM P, TD_S_COMMPARAM C
	 WHERE P.TYPE_ID = C.SEMANTIC_VALUE
	   AND P.TYPE_ID IN
	       (SELECT SEMANTIC_VALUE
	          FROM TD_S_COMMPARAM
	         WHERE SEMANTIC_VALUE IS NOT NULL
	           AND TABLE_NAME = (SELECT TABLE_NAME
	                               FROM TD_S_TABLE_PROPERTY
	                              WHERE TABLE_ID = #{_parameter}))
	</select>
	
	<select id="queryValueToReplace" resultType="java.lang.String">
		SELECT DATA_NAME
	  FROM TD_S_PARAM P, TD_S_COMMPARAM C, TD_S_TABLE_PROPERTY T
	 WHERE C.TABLE_NAME = T.TABLE_NAME
	   AND T.TABLE_ID = #{tableId}
	   AND　P.TYPE_ID = C.SEMANTIC_VALUE
	   AND C.COLUMN_NAME = #{columnName}
	   AND P.DATA_ID = #{dataId}
	</select>
	
</mapper>